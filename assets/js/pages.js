function nextPage(){page<pages-1&&(page++,updatePage(page))}function prevPage(){page>0&&(page--,updatePage(page))}function detectswipe(a){if(!scriptmode){swipe_det=new Object,swipe_det.sX=0,swipe_det.sY=0,swipe_det.eX=0,swipe_det.eY=0;var b=80,c=30,d=50,e=120,f="";ele=document.body,ele.addEventListener("touchstart",function(a){var b=a.touches[0];swipe_det.sX=b.screenX,swipe_det.sY=b.screenY},!1),ele.addEventListener("touchmove",function(a){a.preventDefault();var b=a.touches[0];swipe_det.eX=b.screenX,swipe_det.eY=b.screenY},!1),ele.addEventListener("touchend",function(){(swipe_det.eX-b>swipe_det.sX||swipe_det.eX+b<swipe_det.sX)&&swipe_det.eY<swipe_det.sY+e&&swipe_det.sY>swipe_det.eY-e&&swipe_det.eX>0?f=swipe_det.eX>swipe_det.sX?"r":"l":(swipe_det.eY-d>swipe_det.sY||swipe_det.eY+d<swipe_det.sY)&&swipe_det.eX<swipe_det.sX+c&&swipe_det.sX>swipe_det.eX-c&&swipe_det.eY>0&&(f=swipe_det.eY>swipe_det.sY?"d":"u"),""!=f&&"function"==typeof a&&a(f),f="",swipe_det.sX=0,swipe_det.sY=0,swipe_det.eX=0,swipe_det.eY=0},!1)}}function swipefff(a){"l"==a&&nextPage(),"r"==a&&prevPage()}function checkKey(a){scriptmode||(a=a||window.event,"37"==a.keyCode?prevPage():"39"==a.keyCode&&nextPage())}function jumpTo(){var a=pageinput.value;a?a>=0&&a<pages&&a!=-0?(page=a,updatePage(page)):a>pages-1?(page=pages-1,updatePage(page)):a<=0?(page=0,updatePage(page)):updatePage(page):updatePage(page)}function setBGimg(a,b,c){bgImage=a.split("BG=")[1].split("-->")[0],b.style.backgroundImage="url(/wasteware/assets/img/assets/lines.png), url(/wasteware/assets/img/"+c+bgImage+")",b.style.backgroundSize="auto, 100%, 100%"}function updatePage(a){function c(a){LEDname=a.split("LED=")[1].split("-->")[0],"off"!=LEDname?(LEDdiv.style.backgroundColor="var(--LED-"+LEDname+")",glowdiv.style.backgroundColor="var(--LED-"+LEDname+")",LEDdiv.style.boxShadow="none"):(LEDdiv.style.backgroundColor="",glowdiv.style.backgroundColor="",LEDdiv.style.boxShadow="")}if(epcontent[a].includes("SAME"))for(b=a;b>=0;)epcontent[b].includes("SAME")?b--:(textdiv.innerHTML=epcontent[b],b=-1);else textdiv.innerHTML=epcontent[a],epcontent[a+1]&&(epcontent[a+1].includes("SAME")||textdiv.scrollTo(0,0));0==page?b_prev.classList.add("inactive"):b_prev.classList.remove("inactive"),page==pages-1?b_next.classList.add("inactive"):b_next.classList.remove("inactive");var b;if(epcontent[a].includes("BG="))setBGimg(epcontent[a],screendiv,folder);else for(b=a;b>=0;)epcontent[b].includes("BG=")?(setBGimg(epcontent[b],screendiv,folder),b=-1):b--;if(epcontent[a].includes("LED="))c(epcontent[a]);else for(b=a;b>=0;)epcontent[b].includes("LED=")?(c(epcontent[b]),b=-1):b--;if(epcontent[a+1]&&epcontent[a+1].includes("BG=")&&(bgImage=epcontent[a+1].split("BG=")[1].split("-->")[0],document.getElementById("preload").style.backgroundImage="url(/wasteware/assets/img/"+folder+bgImage+")"),epcontent[a].includes("TRIVIA="))trivia=epcontent[a].split("TRIVIA=")[1].split("-->")[0],triviadiv.innerHTML=trivia;else for(b=a;b>=0;)epcontent[b].includes("TRIVIA=")?(trivia=epcontent[b].split("TRIVIA=")[1].split("-->")[0],triviadiv.innerHTML=trivia,b=-1):b--;pageinput.value=a}var page=0,pages,pageinput=document.getElementById("page"),b_next=document.getElementById("b_next"),b_prev=document.getElementById("b_prev"),b_jumpto=document.getElementById("b_jumpto"),textdiv=document.getElementById("episode"),triviadiv=document.getElementById("trivia"),screendiv=document.getElementById("screen"),basediv=document.getElementById("basegeneric"),LEDdiv=document.getElementById("indicator"),glowdiv=document.getElementById("glow"),epheaddiv=document.getElementById("ephead"),epcontroldiv=document.getElementById("epcontrol"),nojscontentdiv=document.getElementById("nojscontent"),footerdiv=document.getElementById("footer"),epcontent=textdiv.innerHTML,trivia,bgImage,folder,LEDname,scriptmode=!1;document.getElementById("b_js").onclick=function(){scriptmode=!scriptmode,scriptmode?(epheaddiv.classList.add("nojs"),epcontroldiv.classList.add("nojs"),episode.classList.add("nojs"),nojscontent.classList.add("nojs"),footer.classList.add("nojs")):(epheaddiv.classList.remove("nojs"),epcontroldiv.classList.remove("nojs"),episode.classList.remove("nojs"),nojscontent.classList.remove("nojs"),footer.classList.remove("nojs"))},epcontent=epcontent.split("<p>///</p>");var epcontentsize=epcontent.length;if(epcontent[0].includes("SCREEN")){var screencontent=epcontent[0];basediv.innerHTML=screencontent,1==epcontentsize?epcontent[0]=epcontent[1]:epcontent=epcontent.slice(1,epcontentsize)}else textdiv.innerHTML=epcontent[0];pages=epcontent.length,detectswipe(swipefff),document.onkeydown=checkKey,b_next.onclick=function(){nextPage()},b_prev.onclick=function(){prevPage()},pageinput.addEventListener("keyup",function(a){"Enter"===a.key&&jumpTo()}),b_jumpto.onclick=function(){jumpTo()},folder=epcontent[0].includes("EPFOLDER=")?"episodes/"+epcontent[0].match(/EPFOLDER=(\d+\/\d+)/)[1]+"/":"",updatePage(page);
